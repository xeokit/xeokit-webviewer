<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="xeokit - SDK for Browser-Based 3D BIM Visualization">
    <meta name="author" content="Lindsay Kay">
    <meta name="keywords" content="BIM,IFC,WebGL,JavaScript,Browser,BCF,Web,xeolabs,3D,3D Viewer,Lindsay Kay,xeokit,MedViz,ArchViz,Open Source,Browser,Viewer">
    <title>xeokit - 3D Web Programming Toolkit for BIM and Engineering Visualization</title>
    <link href="http://localhost:8080/libs/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://localhost:8080/css/business-frontpage.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Rubik" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="http://localhost:8080/libs/jquery/jquery.min.js"></script>
    <script src="http://localhost:8080/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
    <style>
        html {
            /*overflow-y: scroll; !* Always show vertical scrollbar *!*/
        }
    </style>
    <title></title>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top ">
    <span style="color: #ffffff;">
      <a class="navbar-home" href="http://xeolabs.com">xeolabs</a>/
      <a class="navbar-parent" href="http://localhost:8080">@xeokit/sdk</a>/
      <a class="navbar-brand" href="./index.html">Examples</a>
    </span>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarResponsive">
    <ul class="navbar-nav ml-auto">
        <li class="nav-item">
            <a class="nav-link" href="http://localhost:8080/index.html?foo=0">Home</a>
        </li>
        <li class="nav-item dropdown">
            <a class="nav-link" href="http://localhost:8080/examples/index.html">Examples</a>
        </li>
        <li class="nav-item dropdown">
            <a class="nav-link" href="http://localhost:8080/models/index.html">Models</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="http://localhost:8080/articles/index.html">Articles</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="http://localhost:8080/api-docs.html">API Docs</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="https://github.com/xeokit/sdk">GitHub</a>
        </li>
<!--        <li class="nav-item">-->
<!--            <a class="nav-link" href="https://xeokit.io/index.html?foo=2#pricing">Pricing</a>-->
<!--        </li>-->
<!--        <li class="nav-item">-->
<!--            <a class="nav-link" href="https://xeokit.io/download.html">Download</a>-->
<!--        </li>-->
    </ul>
</div>
;
</nav>
<section id="intro" class="main-section alabaster">
    <div class="container">
        <div class="row testimonial-row">
            <div class="col-lg-12">
                <h1>Examples</h1>
                <hr>

            </div>
        </div>
        <div class="row testimonial-row">
            <div class="col-lg-12" id="content">
                <!-- TOC will be injected here -->
            </div>
        </div>
    </div>
</section>
<footer class="py-5 bg-dark xeokit-footer">
    <div class="container pt-5">
        <div class="row">
            <div class="col-md-4 col-sm-12 mb-3  text-left">
                <h2>xeokit SDK</h2>
                <p>Powering Engineering Graphics on the Web</p>
                <img src="http://localhost:8080/images/xeokitLogoAlphaBG.png">
            </div>
            <div class="col-md-8 col-sm-12">

                <div class="col-md-4 col-sm-6 col-6 p-0 float-left mb-3">
                    <h5 class="mb-4 font-weight-bold text-uppercase ">Learn</h5>
                    <ul class="list-group">
                        <li class="list-group-item bg-transparent border-0 p-0 mb-2"><a
                            href="http://localhost:8080/examples">Examples</a></li>
                        <li class="list-group-item bg-transparent border-0 p-0 mb-2 "><a
                            href="http://localhost:8080/articles">Tutorials</a></li>
                        <li class="list-group-item bg-transparent border-0 p-0 mb-2 "><a
                            href="http://localhost:8080/api-docs.html">API Docs</a></li>
                        <li class="list-group-item bg-transparent border-0 p-0 mb-2"><a
                            href="">Pricing</a></li>
                        <li class="list-group-item bg-transparent border-0 p-0 mb-2"><a
                            href="">FAQ</a></li>

                    </ul>
                </div>

                <div class="col-md-4 col-sm-6 col-6 p-0 mb-3 float-left">
                    <h5 class="mb-4 font-weight-bold text-uppercase ">Develop</h5>
                    <ul class="list-group">
                        <li class="list-group-item bg-transparent border-0 p-0 mb-2"><a
                            href="https://github.com/xeokit/sdk/releases">Download</a></li>
                        <li class="list-group-item bg-transparent border-0 p-0 mb-2"><a
                            href="https://github.com/xeokit/sdk">Source Code</a></li>
                        <li class="list-group-item bg-transparent border-0 p-0 mb-2"><a
                            href="https://github.com/xeokit/xeokit-sdk/issues">Issues</a></li>
                    </ul>
                </div>

                <div class="col-md-4 col-sm-6 col-6 mb-3 p-0 float-left">
                    <h5 class="mb-4 font-weight-bold text-uppercase ">Connect</h5>
                    <ul class="list-group">
                        <li class="list-group-item bg-transparent border-0 p-0 mb-2">
                            <a href="http://www.xeolabs.com"><i class="fa fa-globe mr-1"></i>
                                xeolabs.com</a>
                        </li>
                        <li class="list-group-item bg-transparent border-0 p-0 mb-2">
                            <a href="https://www.linkedin.com/company/xeolabs"><i class="fa fa-linkedin mr-1"></i>
                                LinkedIn</a>
                        </li>
                        <li class="list-group-item bg-transparent border-0 p-0 mb-2">
                            <a href="https://github.com/xeolabs" target="_code"><i class="fa fa-github mr-1"></i>
                                Github</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-md-12">
                <div class="py-4 d-flex justify-content-center align-items-center">
                    <p class="m-0 text-center">Copyright &copy; <a href="http://xeolabs.com">xeolabs</a> 2025</p>
                </div>
            </div>
        </div>
    </div>
</footer>


<script>
    // The topic map is defined as below.
    const topicMap = [
        {
            "id": "overview",
            "title": "Overview",
            "topics": [
                {
                    "id": "modules",
                    "title": "Modules"
                },
                {
                    "id": "pipelines",
                    "title": "Import Pipelines"
                }
            ]
        },
        {
            "id": "import",
            "title": "Importing Models",
            "topics": [
                {
                    "id": "ifc",
                    "title": "IFC Format"
                },
                {
                    "id": "gltf",
                    "title": "glTF Format"
                },
                {
                    "id": "las",
                    "title": "LAS/LAZ Format"
                },
                {
                    "id": "xkt",
                    "title": "XKT Format"
                },
                {
                    "id": "xgf",
                    "title": "XGF Format"
                },
                {
                    "id": "dotbim",
                    "title": ".BIM Format"
                },
                {
                    "id": "cityjson",
                    "title": "CityJSON Format"
                }
            ]
        },
        {
            "id": "modeling",
            "title": "Creating Models",
            "topics": [
                {
                    "id": "scene",
                    "title": "3D Scenes",
                    "topics": [
                        {
                            "id": "geometry",
                            "title": "Geometry"
                        },
                        {
                            "id": "object",
                            "title": "Objects"
                        }
                    ]
                },
                {
                    "id": "data",
                    "title": "Semantic Models"
                }
            ]
        },
        {
            "id": "viewer",
            "title": "Viewer",
            "topics": [
                {
                    "id": "configuration",
                    "title": "Configuration",
                    "topics": []
                },
                {
                    "id": "view",
                    "title": "Views",
                    "topics": [
                        {
                            "id": "camera",
                            "title": "Cameras"
                        },
                        {
                            "id": "viewlayer",
                            "title": "ViewLayers"
                        }
                    ]
                }
            ]
        },

        {
            "id": "general",
            "title": "General"
        }
    ];

    /**
     * Generates an HTML Table of Contents (TOC) using the topicMap as
     * the structural template. Each example (from the fetched examples JSON)
     * has a "topic" property with a dot-delimited string (e.g., "modeling.scene.geometry").
     * The function first builds a lookup mapping topic paths to an array of examples.
     * Then it builds the nested TOC by traversing topicMap recursively.
     *
     * @param {Array} examples - Array of example objects.
     * @returns {string} - The generated HTML TOC as a nested ordered list.
     */
    function generateHTMLTOC(examples) {
        // Build a lookup dictionary mapping topic paths to arrays of examples.
        const topicExampleMap = {};
        for (let objectId in examples) {
            const example = examples[objectId];

            const key = example.topic.trim();
            if (!topicExampleMap[key]) {
                topicExampleMap[key] = [];
            }
            topicExampleMap[key].push(example);
        }

        /**
         * Recursive function that builds an unordered list for the given topics.
         *
         * @param {Array} topics - Array of topic nodes from topicMap.
         * @param {string} parentPath - Current topic path so far.
         * @returns
        }
        Object.values(examples).forEach(example => {
            // Ensure we trim and use the topic string as key.
            const key = example.topic.trim();
            if (!topicExampleMap[key]) {
                topicExampleMap[key] = [];
            }
            topicExampleMap[key].push(example);
        });

        /**
         * Recursive function that builds an unordered list for the given topics.
         *
         * @param {Array} topics - Array of topic nodes from topicMap.
         * @param {string} parentPath - Current topic path so far.
         * @returns {string} - HTML string for the nested list.
         */
        function buildTOCForTopics(topics, parentPath) {
            let html = "<ul>";
            topics.forEach(topic => {
                // Build the full topic path—for root topics, parentPath is empty.
                const currentPath = parentPath ? parentPath + "." + topic.id : topic.id;
                html += `<li>${topic.title}`;

                // If the current topic has subtopics, recurse.
                if (Array.isArray(topic.topics) && topic.topics.length > 0) {
                    html += buildTOCForTopics(topic.topics, currentPath);
                }

                // Append any examples that exactly match the current topic path.
                if (topicExampleMap[currentPath]) {
                    html += "<ul>";
                    topicExampleMap[currentPath].forEach(example => {
                        html += `<li><a href="http://localhost:8080/examples/${example.id}/index.html">${example.title}</a></li>`;
                    });
                    html += "</ul>";
                }

                html += "</li>";
            });
            html += "</ul>";
            return html;
        }

        // Build the full HTML TOC using the global topicMap.
        return buildTOCForTopics(topicMap, "");
    }

    // Fetch the examples JSON file.
    // The JSON is assumed to be an array of example objects. Each object should have:
    // { id: "example1", title: "Example Title", topic: "modeling.scene.geometry", ... }
    fetch("http://localhost:8080/examples/index.json").then(response => {
        response.json().then(examplesIndexJSON => {
            // Inject the generated TOC into the "content" container.
            document.getElementById("content").innerHTML = generateHTMLTOC(examplesIndexJSON);
        });
    });
</script>
</body>
</html>
